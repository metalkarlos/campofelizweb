<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/default_admin.xhtml"
	xmlns:my="http://java.sun.com/jsf/composite/components/buttons">
	
	<ui:define name="head">
		
		<meta name="robots" content="noindex" />
		
		<title>Administración - Quienes Somos</title>
		
		<style type="text/css">
			.inner-content {
				padding: 30px 0;
			}
			label {
				font-weight: bold;
				font-size: 15px;
				line-height: 300%;
			}
			.ui-panelgrid tr, .ui-panelgrid td {
				border: none;
				/*padding: 0 10px;*/
			}
			.ui-panelgrid .alto-columna {
				padding-bottom: 15px;
			}
			.area-botones {
				margin: 0 0 25px 25px;
			}
			.panel-previa .ui-panel-content {
				padding: 0;
			}
		</style>
    </ui:define>
    
    <ui:define name="content_page">
		<div class="content-page">
		<h:form id="form-contentpage" enctype="multipart/form-data">
			<p:growl id="mensajes" showDetail="true" />
			<h1 class="title ui-widget-header">Administración - Quienes Somos</h1>
			
			<div class="inner-content">
				<p:panelGrid id="idgridcontenido" >
				<p:row>
				<p:column>
				 <center>
				  <p:galleria id="idgalleria" value="#{quienesSomosAdminBean.listpetfotoinformacion}" var="item" panelWidth="500" transitionInterval="0"  panelHeight="400"  styleClass="ui-widget-content ui-corner-all">
				  <p:graphicImage  id="idfotos" value="#{parametro.servletImagenes}#{item.ruta}?w=70" style="max-height: 70px;"/>
				  <p:galleriaContent>  
				   <h:panelGrid columns="1" style="box-shadow: 1px 2px 5px #BBB;">  
				     <p:graphicImage styleClass="imagenprincipal" id="idfoto"  value="#{parametro.servletImagenes}#{item.ruta}?w=420" style="max-height: 260px;" />
				     <h:outputLabel value="Descripción de la Foto" for ="txtObservacionFotoItem"/>
					 <p:inputTextarea id="txtObservacionFotoItem" value="#{item.descripcion}" maxlength="500" style="width: 400px;max-width:400px;min-width: 400px;max-height: 45px;height: 45px;min-height: 45px;"/>
				     <p:commandButton id="idbuttondelete"  title="Eliminar foto permanentemente" icon="ui-icon ui-icon-trash" onclick="vardialogdelete.show()" style="position:absolute;right:40px;top:20px;" update=":form-contentpage:idpaneldelete">
				     <f:setPropertyActionListener value="#{item}" target="#{quienesSomosAdminBean.petfotoinformacionselected}" />
				     </p:commandButton>
				   </h:panelGrid>
				  </p:galleriaContent>
				  </p:galleria>
				  </center>
				</p:column>				  
				</p:row>
				<p:row>
				<p:column>
				 <h:outputLabel value="Agregar Foto" for="idSubeFotos" /><br />
				 <p:panel id="pnlPrevia" styleClass="panel-previa">
				 <p:graphicImage id="idfotoseleccionada" value="#{usuarioBean.streamedContent}" style="max-height: 70px;"  rendered="#{quienesSomosAdminBean.fotoSubida}" />
				 <p:commandButton id="btnBorraFoto" icon="ui-icon ui-icon-trash" action="#{quienesSomosAdminBean.borrarFotoSubida()}" update="pnlPrevia,idpaneltextdescfoto" rendered="#{quienesSomosAdminBean.fotoSubida}" />
				 </p:panel>
				 <p:fileUpload id="idSubeFotos" fileUploadListener="#{quienesSomosAdminBean.handleFileUpload}" mode="advanced"  label="Elegir Foto" cancelLabel="Cancelar" uploadLabel="Subir  Foto"
					update="mensajes, pnlPrevia,idpaneltextdescfoto" showButtons="false" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" widgetVar="widgetVar"/>
			   </p:column>
			   </p:row>  
			   <p:row>
				 <p:column>
				 <h:panelGroup id="idpaneltextdescfoto">
				 <h:outputLabel value="Descripción de la Foto" for="txtObservacionFoto"  rendered="#{quienesSomosAdminBean.fotoSubida}"/>
				 <p:inputTextarea id="txtObservacionFoto" value="#{quienesSomosAdminBean.descripcionImagen}" maxlength="500" autoResize="false" rendered="#{quienesSomosAdminBean.fotoSubida}" />
				 </h:panelGroup>
				 </p:column>
				</p:row>
			   <p:row>
			   <p:column styleClass="alto-columna">
			    <h:outputLabel value="Quienes Somos" for="txtquienessomos" />
			   </p:column>
			   </p:row>
			   <p:row>
			   <p:column styleClass="alto-columna">
			    <p:editor    id="txtquienessomos" width="600"  value="#{quienesSomosAdminBean.petinformacion.quienessomos}" required="true" requiredMessage="Es necesario ingresar el contenido de Quienes Somos" controls="bold italic underline bullets numbering  undo redo link unlink cut copy paste source removeformat" />
			   </p:column>
			   </p:row>
   			   <p:row>
			   <p:column styleClass="alto-columna">
			     <h:outputLabel value="Misión" for="txtmision" />
			   </p:column>
			   </p:row>
  			   <p:row>
			   <p:column styleClass="alto-columna">
			     <p:editor  id="txtmision" width="600"   value="#{quienesSomosAdminBean.petinformacion.mision}" controls="bold italic underline bullets numbering  undo redo link unlink cut copy paste source removeformat"/>
			   </p:column>
			   </p:row>
			   <p:row>
			   <p:column styleClass="alto-columna">
			     <h:outputLabel value="Visión" for="txtvision" />
			   </p:column>
			   </p:row>
			   <p:row>
			   <p:column styleClass="alto-columna">
				<p:editor  id="txtvision"  width="600"  value="#{quienesSomosAdminBean.petinformacion.vision}" controls="bold italic underline bullets numbering  undo redo link unlink cut copy paste source removeformat"/>
			   </p:column>
			   </p:row>
			   <p:row>
			   <p:column>
			    <h:outputLabel value="Tags" for="txtTags" /><br />
				<p:inputText id="txtTags" value="#{quienesSomosAdminBean.petinformacion.tag}" style="width: 600px;"></p:inputText>
			   </p:column>
			   </p:row>
			 </p:panelGrid>	
			</div>
			
			<div class="area-botones">
				<my:buttons renderedButtonAceptar="true" labelButtonAceptar="Grabar" onclickButtonAceptar="vardialoggrabar.show()" 
				renderedButtonEliminar="false" 
				renderedButtonCancelar="true" labelButtonCancelar="Cancelar" onclickButtonCancelar="redirect('../pages/quienessomos.jsf');" 
				renderedButtonNewItem="false" />
			</div>	
			
			<p:dialog id="iddialogdelete"  header="Eliminar Foto" closable="true" widgetVar="vardialogdelete" modal="true" style="min-height: 80px; width: 450px">
				<h:panelGrid id="idpaneldelete" columns="2" width="100%">
					<p:graphicImage value="#{parametro.servletImagenes}#{quienesSomosAdminBean.petfotoinformacionselected.ruta}" style="max-height: 50px" />
					<h:outputText id="idlabeldelete" value="¿Quitar foto?" />
					<h:outputText value="" />
					<p:panelGrid id="idpanel2delete" style="width: 100%; text-align: right;">
						<p:row>
						<p:column>
						<p:commandButton id="idconfirmardelete" value="Confirmar" action="#{quienesSomosAdminBean.quitarFoto()}" onclick="vardialogdelete.hide()" update=":form-contentpage:mensajes, :form-contentpage:idgridcontenido" />
						<p:commandButton id="idcancelardelete" value="Cancelar" onclick="vardialogdelete.hide()" />
						</p:column>
						</p:row>
					</p:panelGrid>
				</h:panelGrid>
			</p:dialog>
			
			
			<p:dialog id="iddialoggrabar" header="Grabar" closable="true" widgetVar="vardialoggrabar" modal="true" style="min-height: 80px; width: 450px">
				<h:panelGrid id="idpanelgrabar" columns="2" width="100%">
					<h:outputText id="idlabelgrabar" value="Confirme si desea grabar el registro" />
					<h:outputText value="" />
					<h:outputText value="" />
					<p:panelGrid id="idpanel2grabar" style="width: 100%; text-align: right;">
						<p:row>
						<p:column>
						<p:commandButton id="idconfirmargrabar" value="Confirmar" action="#{quienesSomosAdminBean.grabar()}" onclick="vardialoggrabar.hide()" update=":form-contentpage:mensajes" />
						<p:commandButton id="idcancelargrabar" value="Cancelar" onclick="vardialoggrabar.hide()" />
						</p:column>
						</p:row>
					</p:panelGrid>
				</h:panelGrid>
			</p:dialog>
			
		</h:form>
		</div>
	</ui:define>		
    
</ui:composition>