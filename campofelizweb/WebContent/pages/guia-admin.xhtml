<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/default_admin.xhtml"
	xmlns:my="http://java.sun.com/jsf/composite/components/buttons">
	
	<ui:define name="head">
	   <title>Administración - Como decir Adiós</title>
		
		<style type="text/css">
			.inner-content {
				padding: 30px 0;
			}
			label {
				font-weight: bold;
				font-size: 15px;
				line-height: 300%;
			}
			.ui-panelgrid tr, .ui-panelgrid td {
				border: none;
				padding: 0 10px;
			}
			.ui-panelgrid table, .ui-widget table {
				border: none;
			
			}
			.ui-panelgrid .alto-columna {
				padding-bottom: 15px;
			}
			.area-botones {
				margin: 0 0 25px 25px;
			}
			.panel-previa .ui-panel-content {
				padding: 0;
			}
		</style>
	
	</ui:define>
	
	<ui:define name="content_page">
		<div class="content-page">
		<h:form id="form-contentpage" enctype="multipart/form-data">
			<p:growl id="mensajes" showDetail="true" />
			<h1 class="title ui-widget-header">Administración - Como decir Adiós</h1>
			<div class="inner-content">
			 <p:panelGrid id="idgridcontenido" >
			   <p:row>
			     <p:column>
				   <h:outputLabel value="Título del Artículo" for="txtTitulo" /><br />
				   <p:inputText id="txtTitulo" value="#{guiaAdminBean.petguia.titulo}" style="width: 600px;"></p:inputText>
				  </p:column>
			   </p:row>
			   
			   <p:row>
			   	 <p:column>
			     <h:panelGroup id="idpanellabelgaleria">
			         <h:outputLabel id="lblFotos" value="Fotos" for="idgalleria" rendered="#{guiaAdminBean.lisPetfotoguia.size() > 0}" />
			     </h:panelGroup>	
			     <h:panelGroup id="idpanelgaleria" styleClass="centrar">
			       <p:galleria id="idgalleria" value="#{guiaAdminBean.lisPetfotoguia}" var="item" transitionInterval="0" panelWidth="500" panelHeight="320" rendered="#{guiaAdminBean.lisPetfotoguia.size() > 0}">
				        <p:graphicImage id="idfotos" value="#{guiaAdminBean.rutaImagenes}#{item.ruta}" style="max-height: 58px;" />
				        <p:galleriaContent> 
				           <h:panelGrid columns="1" style="background-color: #eaeaea;height: 100%; width: 100%;" >
				             <f:facet name="header">
						       	<p:graphicImage id="idfoto" value="#{guiaAdminBean.rutaImagenes}#{item.ruta}" style="max-height: 300px; padding-top: 10px" />
						     </f:facet>
						     <p:commandButton id="idbuttonprincipal" title="Colocar como foto principal" icon="ui-icon ui-icon-person"  onclick="vardialogprincipal.show()" style="position:absolute;right:0px;top:30px;" update=":form-contentpage:idpanelprincipal" >
						       	<f:setPropertyActionListener value="#{item}" target="#{guiaAdminBean.petfotoguiaSeleccionada}" />
						     </p:commandButton>
						     <p:commandButton id="idbuttondelete"  title="Eliminar foto permanentemente" icon="ui-icon ui-icon-trash" onclick="vardialogdelete.show()" style="position:absolute;right:0px;top:60px;" update=":form-contentpage:idpaneldelete">
						       	<f:setPropertyActionListener value="#{item}" target="#{guiaAdminBean.petfotoguiaSeleccionada}" />
						     </p:commandButton>  
				          </h:panelGrid> 
				       </p:galleriaContent>
			      </p:galleria>
			     </h:panelGroup> 
			     </p:column>
			   </p:row>
			   
			   <p:row>
				<p:column>
					<h:outputLabel value="Agregar Foto" for="idSubeFotos" /><br />
					<p:panel id="pnlPrevia" styleClass="panel-previa">
					<p:graphicImage id="idfotoseleccionada" value="#{usuarioBean.streamedContent}" style="max-height: 100px;" rendered="#{guiaAdminBean.fotoSubida}" />
					<p:commandButton id="btnBorraFoto" icon="ui-icon ui-icon-trash" action="#{guiaAdminBean.borrarFotoSubida()}" update="pnlPrevia, idpaneltextdescfoto" rendered="#{guiaAdminBean.fotoSubida}" />
					</p:panel>
					<p:fileUpload id="idSubeFotos" fileUploadListener="#{guiaAdminBean.handleFileUpload}" mode="advanced"  cancelLabel="Cancelar" 
					uploadLabel="Subir Foto" label="Elegir Foto"
					update="mensajes, pnlPrevia"  allowTypes="/(\.|\/)(gif|jpe?g|png)$/" widgetVar="widgetVar"/>
				</p:column>
			  </p:row>
			  
			  <p:row>
				<p:column>
					<h:panelGroup id="idpaneltextdescfoto">
					<h:outputLabel value="Descripción de la Foto" for="txtObservacionFoto" rendered="#{guiaAdminBean.fotoSubida}" />
					<p:inputTextarea id="txtObservacionFoto" value="#{guiaAdminBean.descripcionFoto}" maxlength="500" autoResize="false" rendered="#{guiaAdminBean.fotoSubida}" />
					</h:panelGroup>
				</p:column>
			 </p:row>
			 
			 <p:row>
				<p:column>
					<h:outputLabel value="Contenido del Artículo" for="txtContenido" /><br />
					<p:editor id="txtContenido" value="#{guiaAdminBean.petguia.descripcion}" width="600"/>
				</p:column>
			 </p:row>
			 
			 <p:row>
				<p:column>
				<h:outputLabel value="Fecha de Publicación" for="txtFechaPublicacion" /><br />
				<p:calendar id="txtFechaPublicacion" value="#{guiaAdminBean.petguia.fechapublicacion}" yearRange="c-20:c" locale="es" pattern="dd/MM/yyyy" navigator="true" />
				</p:column>
			</p:row>
			
			<p:row>
				<p:column>
				<h:outputLabel value="Tags" for="txtTags" /><br />
				<p:inputText id="txtTags" value="#{guiaAdminBean.petguia.tag}" style="width: 600px;"></p:inputText>
				</p:column>
			</p:row>  
			   
			<p:row>
				<p:column>
				<h:outputLabel value="¿Aparece en la página principal?" for="txtprincipal" /><br />
				<p:selectBooleanCheckbox id="txtprincipal" itemLabel="Sí" value="#"></p:selectBooleanCheckbox>
				</p:column>
			</p:row>
					  
		   </p:panelGrid>
		  </div>

           <div class="area-botones">
			<my:buttons renderedButtonAceptar="true" labelButtonAceptar="Grabar" onclickButtonAceptar="vardialoggrabar.show()" 
			renderedButtonEliminar="#{guiaAdminBean.idguia> 0}" onclickButtonEliminar="vardialogdeletenoticia.show()" 
			renderedButtonCancelar="true" labelButtonCancelar="Cancelar" onclickButtonCancelar="redirect('guiageneral.jsf');"
			renderedButtonNewItem="false" />
			</div>

			<p:dialog id="iddialogprincipal" header="Foto Principal" closable="true" widgetVar="vardialogprincipal" modal="true" style="min-height: 80px; width: 450px">
				<h:panelGrid id="idpanelprincipal" columns="2" width="100%">
					<p:graphicImage value="#{guiaBean.rutaImagenes}#{guiaAdminBean.petfotoguiaSeleccionada.ruta}" style="max-height: 50px" />
					<h:outputText id="idlabelprincipal" value="¿Seleccionar imágen como foto principal?" />
					<h:outputText value="" />
					<p:panelGrid id="idpanel2principal" style="width: 100%; text-align: right;">
						<p:row>
						<p:column>
						<p:commandButton id="idconfirmarprincipal" value="Confirmar" action="#{guiaAdminBean.ponerFotoPrincipal()}" oncomplete="vardialogprincipal.hide()" update=":form-contentpage:mensajes" />
						<p:commandButton id="idcancelarprincipal" value="Cancelar" onclick="vardialogprincipal.hide()" />
						</p:column>
						</p:row>
					</p:panelGrid>
				</h:panelGrid>
			</p:dialog>
			
			<p:dialog id="iddialogdelete"  header="Eliminar Foto" closable="true" widgetVar="vardialogdelete" modal="true" style="min-height: 80px; width: 450px">
				<h:panelGrid id="idpaneldelete" columns="2" width="100%">
					<p:graphicImage value="#{guiaBean.rutaImagenes}#{guiaAdminBean.petfotoguiaSeleccionada.ruta}" style="max-height: 50px" />
					<h:outputText id="idlabeldelete" value="¿Quitar foto?" />
					<h:outputText value="" />
					<p:panelGrid id="idpanel2delete" style="width: 100%; text-align: right;">
						<p:row>
						<p:column>
						<p:commandButton id="idconfirmardelete" value="Confirmar" action="#{guiaAdminBean.quitarFotoGaleria()}" oncomplete="vardialogdelete.hide()" update=":form-contentpage:mensajes, :form-contentpage:idpanellabelgaleria, :form-contentpage:idpanelgaleria" />
						<p:commandButton id="idcancelardelete" value="Cancelar" onclick="vardialogdelete.hide()" />
						</p:column>
						</p:row>
					</p:panelGrid>
				</h:panelGrid>
			</p:dialog>
			
			<p:dialog id="iddialoggrabar" header="Grabar" closable="true" widgetVar="vardialoggrabar" modal="true" style="min-height: 80px; width: 450px">
				<h:panelGrid id="idpanelgrabar" columns="2" width="100%">
					<h:outputText id="idlabelgrabar" value="Confirme si desea grabar el registro" />
					<h:outputText value="" />
					<h:outputText value="" />
					<p:panelGrid id="idpanel2grabar" style="width: 100%; text-align: right;">
						<p:row>
						<p:column>
						<p:commandButton id="idconfirmargrabar" value="Confirmar" action="#{guiaAdminBean.grabar()}" oncomplete="vardialoggrabar.hide()" update=":form-contentpage:mensajes" />
						<p:commandButton id="idcancelargrabar" value="Cancelar" onclick="vardialoggrabar.hide()" />
						</p:column>
						</p:row>
					</p:panelGrid>
				</h:panelGrid>
			</p:dialog>
			 
			<p:dialog id="iddialogdeletenoticia"  header="Eliminar Noticia" closable="true" widgetVar="vardialogdeletenoticia" modal="true" style="min-height: 80px; width: 450px">
				<h:panelGrid id="idpaneldeletenoticia" columns="2" width="100%">
					<h:outputText id="idlabeldeletenoticia" value="Confirme si desea eliminar la noticia" />
					<h:outputText value="" />
					<h:outputText value="" />
					<p:panelGrid id="idpanel2deletenoticia" style="width: 100%; text-align: right;">
						<p:row>
						<p:column>
						<p:commandButton id="idconfirmardeletenoticia" value="Confirmar" action="#{guiaAdminBean.eliminar()}" oncomplete="vardialogdeletenoticia.hide()" update=":form-contentpage:mensajes" />
						<p:commandButton id="idcancelardeletenoticia" value="Cancelar" onclick="vardialogdeletenoticia.hide()" />
						</p:column>
						</p:row>
					</p:panelGrid>
				</h:panelGrid>
			</p:dialog> 
			 
		</h:form>
		</div>
	</ui:define>		
	
</ui:composition>	